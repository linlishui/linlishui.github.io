<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>字节码 on 缥缈夏鸢</title>
    <link>/tags/%E5%AD%97%E8%8A%82%E7%A0%81/</link>
    <description>Recent content in 字节码 on 缥缈夏鸢</description>
    <generator>Hugo -- 0.138.0</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 15 Jan 2026 14:41:00 +0800</lastBuildDate>
    <atom:link href="/tags/%E5%AD%97%E8%8A%82%E7%A0%81/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>字节码技术入门</title>
      <link>/posts/jvm/bytecode_guide/</link>
      <pubDate>Thu, 15 Jan 2026 14:41:00 +0800</pubDate>
      <guid>/posts/jvm/bytecode_guide/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;本文档介绍 Android 开发中的字节码操作技术，包括字节码基础、Javassist、ASM 框架的使用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;1-字节码基础知识&#34;&gt;1. 字节码基础知识&lt;/h2&gt;
&lt;h3 id=&#34;11-什么是字节码&#34;&gt;1.1 什么是字节码&lt;/h3&gt;
&lt;p&gt;Java 字节码（Bytecode）是 Java 源代码编译后的中间表示形式，存储在 &lt;code&gt;.class&lt;/code&gt; 文件中。JVM（Java Virtual Machine）执行的就是字节码，而不是源代码。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;特点&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;平台无关性：Write Once, Run Anywhere&lt;/li&gt;
&lt;li&gt;介于高级语言和机器码之间&lt;/li&gt;
&lt;li&gt;可被工具读取、修改、生成&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;12-class-文件结构&#34;&gt;1.2 Class 文件结构&lt;/h3&gt;
&lt;p&gt;一个 &lt;code&gt;.class&lt;/code&gt; 文件的基本结构：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ClassFile {
    u4             magic;                    // 魔数 0xCAFEBABE
    u2             minor_version;            // 次版本号
    u2             major_version;            // 主版本号
    u2             constant_pool_count;      // 常量池计数
    cp_info        constant_pool[];          // 常量池
    u2             access_flags;             // 访问标志
    u2             this_class;               // 当前类
    u2             super_class;              // 父类
    u2             interfaces_count;         // 接口计数
    u2             interfaces[];             // 接口表
    u2             fields_count;             // 字段计数
    field_info     fields[];                 // 字段表
    u2             methods_count;            // 方法计数
    method_info    methods[];                // 方法表
    u2             attributes_count;         // 属性计数
    attribute_info attributes[];             // 属性表
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;13-常用字节码指令&#34;&gt;1.3 常用字节码指令&lt;/h3&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;aload_0&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;加载局部变量表第 0 个引用到栈顶&lt;/td&gt;
          &lt;td&gt;加载 &lt;code&gt;this&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;invokespecial&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;调用实例初始化方法、私有方法&lt;/td&gt;
          &lt;td&gt;构造函数调用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;invokevirtual&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;调用实例方法（虚方法）&lt;/td&gt;
          &lt;td&gt;普通方法调用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;invokestatic&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;调用静态方法&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;Math.max()&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;invokeinterface&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;调用接口方法&lt;/td&gt;
          &lt;td&gt;接口方法调用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;return&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从方法返回 void&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;void&lt;/code&gt; 方法结束&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;areturn&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从方法返回引用类型&lt;/td&gt;
          &lt;td&gt;返回对象&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;getfield&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;获取实例字段值&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;obj.field&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;putfield&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置实例字段值&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;obj.field = value&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;getstatic&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;获取静态字段值&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;Class.STATIC_FIELD&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;putstatic&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置静态字段值&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;Class.STATIC_FIELD = value&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;new&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;创建对象实例&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;new Object()&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;14-方法描述符&#34;&gt;1.4 方法描述符&lt;/h3&gt;
&lt;p&gt;方法描述符用于描述方法的参数和返回值类型：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
